{% extends "base.html" %}
{% load static i18n %}

{% block title %}Přihlášení - QuietPage{% endblock %}

{% block meta_description %}Přihlaste se do QuietPage a pokračujte ve psaní vašeho deníku.{% endblock %}

{% block content %}
<div class="auth-container">
    <div class="auth-card card">
        <div class="auth-header">
            <h1>Vítejte zpět</h1>
            <p class="text-muted">Přihlaste se do svého účtu</p>
        </div>

        <form method="post" action="{% url 'account_login' %}" class="auth-form">
            {% csrf_token %}
            
            {% if redirect_field_value %}
                <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}" />
            {% endif %}

            <!-- Username or Email Field -->
            <div class="form-group">
                <label for="id_login" class="form-label form-label-required">
                    Uživatelské jméno nebo e-mail
                </label>
                <input 
                    type="text" 
                    name="login" 
                    id="id_login"
                    class="form-input {% if form.login.errors %}is-invalid{% endif %}"
                    placeholder="vas@email.cz nebo uzivatelskeJmeno"
                    autocomplete="username"
                    required
                    autofocus
                    value="{{ form.login.value|default:'' }}"
                >
                {% if form.login.errors %}
                    <div class="invalid-feedback">
                        {{ form.login.errors.0 }}
                    </div>
                {% endif %}
            </div>

            <!-- Password Field -->
            <div class="form-group">
                <label for="id_password" class="form-label form-label-required">
                    Heslo
                </label>
                <input 
                    type="password" 
                    name="password" 
                    id="id_password"
                    class="form-input {% if form.password.errors %}is-invalid{% endif %}"
                    placeholder="Vaše heslo"
                    autocomplete="current-password"
                    required
                >
                {% if form.password.errors %}
                    <div class="invalid-feedback">
                        {{ form.password.errors.0 }}
                    </div>
                {% endif %}
            </div>

            <!-- Non-field Errors (e.g., invalid credentials) -->
            {% if form.non_field_errors %}
                <div class="form-group">
                    <div class="invalid-feedback" style="display: block;">
                        {{ form.non_field_errors.0 }}
                    </div>
                </div>
            {% endif %}

            <!-- Submit Button -->
            <div class="form-group">
                <button type="submit" class="btn btn-primary btn-block btn-lg">
                    Přihlásit se
                </button>
            </div>
        </form>

        <!-- Auth Footer -->
        <div class="auth-footer">
            <div class="divider"></div>
            
            <p class="text-muted text-small" style="text-align: center;">
                Ještě nemáte účet? 
                <a href="{% url 'account_signup' %}">Zaregistrujte se</a>
            </p>
            
            <!-- Password reset link (pro budoucnost) -->
            <!-- <p class="text-muted text-small" style="text-align: center; margin-top: 8px;">
                <a href="{% url 'account_reset_password' %}">Zapomenuté heslo?</a>
            </p> -->
        </div>
    </div>
</div>
{% endblock %}
